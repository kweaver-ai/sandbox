{{- if .Values.configMap.create }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.configMap.name }}
  namespace: {{ .Values.global.namespace }}
  labels:
    app: {{ include "sandbox.fullname" . }}
data:
  ENVIRONMENT: {{ .Values.controlPlane.env.ENVIRONMENT | quote }}
  DEBUG: {{ .Values.controlPlane.env.DEBUG | quote }}
  DATABASE_URL: {{ .Values.controlPlane.env.DATABASE_URL | quote }}
  KUBERNETES_NAMESPACE: {{ .Values.controlPlane.env.KUBERNETES_NAMESPACE | quote }}
  DEFAULT_TIMEOUT: {{ .Values.controlPlane.env.DEFAULT_TIMEOUT | quote }}
  MAX_TIMEOUT: {{ .Values.controlPlane.env.MAX_TIMEOUT | quote }}
  DEFAULT_CPU: {{ .Values.controlPlane.env.DEFAULT_CPU | quote }}
  DEFAULT_MEMORY: {{ .Values.controlPlane.env.DEFAULT_MEMORY | quote }}
  DEFAULT_DISK: {{ .Values.controlPlane.env.DEFAULT_DISK | quote }}
  IDLE_THRESHOLD_MINUTES: {{ .Values.controlPlane.env.IDLE_THRESHOLD_MINUTES | quote }}
  MAX_LIFETIME_HOURS: {{ .Values.controlPlane.env.MAX_LIFETIME_HOURS | quote }}
  CLEANUP_INTERVAL_SECONDS: {{ .Values.controlPlane.env.CLEANUP_INTERVAL_SECONDS | quote }}
  DISABLE_BWRAP: {{ .Values.controlPlane.env.DISABLE_BWRAP | quote }}
  JUICEFS_ENABLED: {{ .Values.controlPlane.env.JUICEFS_ENABLED | quote }}
  JUICEFS_HOST_PATH: {{ .Values.controlPlane.env.JUICEFS_HOST_PATH | quote }}
  JUICEFS_CONTAINER_MOUNT_PATH: {{ .Values.controlPlane.env.JUICEFS_CONTAINER_MOUNT_PATH | quote }}
  PYTHONUNBUFFERED: {{ .Values.controlPlane.env.PYTHONUNBUFFERED | quote }}
{{- end }}
